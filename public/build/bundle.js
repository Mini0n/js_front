var app=function(){"use strict";function t(){}function n(t,n){for(const e in n)t[e]=n[e];return t}function e(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(e)}function c(t){return"function"==typeof t}function s(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function i(t,n){t.appendChild(n)}function u(t,n,e){t.insertBefore(n,e||null)}function a(t){t.parentNode.removeChild(t)}function l(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function p(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function m(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function h(t,n){n=""+n,t.data!==n&&(t.data=n)}let g;function k(t){g=t}function y(){if(!g)throw new Error("Function called outside component initialization");return g}const $=[],b=[],w=[],v=[],x=Promise.resolve();let _=!1;function E(t){w.push(t)}function j(){const t=new Set;do{for(;$.length;){const t=$.shift();k(t),C(t.$$)}for(;b.length;)b.pop()();for(let n=0;n<w.length;n+=1){const e=w[n];t.has(e)||(e(),t.add(e))}w.length=0}while($.length);for(;v.length;)v.pop()();_=!1}function C(t){null!==t.fragment&&(t.update(t.dirty),r(t.before_update),t.fragment&&t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(E))}const M=new Set;let q;function A(){q={r:0,c:[],p:q}}function L(){q.r||r(q.c),q=q.p}function O(t,n){t&&t.i&&(M.delete(t),t.i(n))}function S(t,n,e,o){if(t&&t.o){if(M.has(t))return;M.add(t),q.c.push(()=>{M.delete(t),o&&(e&&t.d(1),o())}),t.o(n)}}function N(t,e){const o=e.token={};function r(t,r,c,s){if(e.token!==o)return;e.resolved=c&&{[c]:s};const i=n(n({},e.ctx),e.resolved),u=t&&(e.current=t)(i);let a=!1;e.block&&(e.blocks?e.blocks.forEach((t,n)=>{n!==r&&t&&(A(),S(t,1,1,()=>{e.blocks[n]=null}),L())}):e.block.d(1),u.c(),O(u,1),u.m(e.mount(),e.anchor),a=!0),e.block=u,e.blocks&&(e.blocks[r]=u),a&&j()}if((c=t)&&"object"==typeof c&&"function"==typeof c.then){const n=y();if(t.then(t=>{k(n),r(e.then,1,e.value,t),k(null)},t=>{k(n),r(e.catch,2,e.error,t),k(null)}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved={[e.value]:t}}var c}function R(t,n){S(t,1,1,()=>{n.delete(t.key)})}function z(t){t&&t.c()}function P(t,n,o){const{fragment:s,on_mount:i,on_destroy:u,after_update:a}=t.$$;s&&s.m(n,o),E(()=>{const n=i.map(e).filter(c);u?u.push(...n):r(n),t.$$.on_mount=[]}),a.forEach(E)}function T(t,n){const e=t.$$;null!==e.fragment&&(r(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx={})}function B(t,n){t.$$.dirty||($.push(t),_||(_=!0,x.then(j)),t.$$.dirty=o()),t.$$.dirty[n]=!0}function F(n,e,c,s,i,u){const a=g;k(n);const l=e.props||{},d=n.$$={fragment:null,ctx:null,props:u,update:t,not_equal:i,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:o(),dirty:null};let f=!1;d.ctx=c?c(n,l,(t,e,o=e)=>(d.ctx&&i(d.ctx[t],d.ctx[t]=o)&&(d.bound[t]&&d.bound[t](o),f&&B(n,t)),e)):l,d.update(),f=!0,r(d.before_update),d.fragment=!!s&&s(d.ctx),e.target&&(e.hydrate?d.fragment&&d.fragment.l(function(t){return Array.from(t.childNodes)}(e.target)):d.fragment&&d.fragment.c(),e.intro&&O(n.$$.fragment),P(n,e.target,e.anchor),j()),k(a)}class H{$destroy(){T(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}function D(n){let e;return{c(){(e=l("p")).textContent="loading...",m(e,"class","svelte-6rb0gc")},m(t,n){u(t,e,n)},p:t,i:t,o:t,d(t){t&&a(e)}}}class G extends H{constructor(t){super(),F(this,t,null,D,s,{})}}function I(n){let e;return{c(){(e=l("pre")).textContent="ERROR Loading x_x",m(e,"class","svelte-1tbvt26")},m(t,n){u(t,e,n)},p:t,i:t,o:t,d(t){t&&a(e)}}}class J extends H{constructor(t){super(),F(this,t,null,I,s,{})}}function K(n){let e,o,r,c,s,g,k,y,$,b,w,v,x,_=(n.name.length>50?n.name.slice(0,50)+"...":n.name)+"";return{c(){e=l("tr"),o=l("td"),r=d(n.asin),c=f(),s=l("td"),g=d(n.category),k=f(),y=l("td"),$=d(_),b=f(),w=l("td"),v=d(n.count),m(o,"class","svelte-1k3yttw"),m(s,"class","svelte-1k3yttw"),m(y,"class","svelte-1k3yttw"),m(w,"class","svelte-1k3yttw"),m(e,"class","svelte-1k3yttw"),x=p(e,"click",n.handleClick)},m(t,n){u(t,e,n),i(e,o),i(o,r),i(e,c),i(e,s),i(s,g),i(e,k),i(e,y),i(y,$),i(e,b),i(e,w),i(w,v)},p(t,n){t.asin&&h(r,n.asin),t.category&&h(g,n.category),t.name&&_!==(_=(n.name.length>50?n.name.slice(0,50)+"...":n.name)+"")&&h($,_),t.count&&h(v,n.count)},i:t,o:t,d(t){t&&a(e),x()}}}function Q(t,n,e){let{asin:o=2818281}=n,{name:r="ola k ase"}=n,{category:c="product"}=n,{rank:s="2.5"}=n,{weight:i="43 lb"}=n,{dimensions:u="1 x 2 x 3 inch"}=n,a=0;return t.$set=t=>{"asin"in t&&e("asin",o=t.asin),"name"in t&&e("name",r=t.name),"category"in t&&e("category",c=t.category),"rank"in t&&e("rank",s=t.rank),"weight"in t&&e("weight",i=t.weight),"dimensions"in t&&e("dimensions",u=t.dimensions)},{asin:o,name:r,category:c,rank:s,weight:i,dimensions:u,count:a,handleClick:function(){e("count",a+=1)}}}class U extends H{constructor(t){super(),F(this,t,Q,K,s,{asin:0,name:0,category:0,rank:0,weight:0,dimensions:0})}}function V(t,n,e){const o=Object.create(t);return o.prod=n[e],o}function W(n){let e;const o=new J({});return{c(){z(o.$$.fragment)},m(t,n){P(o,t,n),e=!0},p:t,i(t){e||(O(o.$$.fragment,t),e=!0)},o(t){S(o.$$.fragment,t),e=!1},d(t){T(o,t)}}}function X(t){let n,e,o,r,c,s,p,g,k,y=t.value+"",$=1===t.value?"product":"products",b=[],w=new Map,v=t.products;const x=t=>t.prod.id;for(let n=0;n<v.length;n+=1){let e=V(t,v,n),o=x(e);w.set(o,b[n]=Y(o,e))}return{c(){n=l("p"),e=d(y),o=f(),r=d($),c=d(" loaded"),s=f(),p=l("table"),g=l("tbody");for(let t=0;t<b.length;t+=1)b[t].c();m(p,"class","svelte-1y0jqd5")},m(t,a){u(t,n,a),i(n,e),i(n,o),i(n,r),i(n,c),u(t,s,a),u(t,p,a),i(p,g);for(let t=0;t<b.length;t+=1)b[t].m(g,null);k=!0},p(t,n){k&&!t.promise_products||y===(y=n.value+"")||h(e,y),k&&!t.promise_products||$===($=1===n.value?"product":"products")||h(r,$);const o=n.products;A(),b=function(t,n,e,o,r,c,s,i,u,a,l,d){let f=t.length,p=c.length,m=f;const h={};for(;m--;)h[t[m].key]=m;const g=[],k=new Map,y=new Map;for(m=p;m--;){const t=d(r,c,m),i=e(t);let u=s.get(i);u?o&&u.p(n,t):(u=a(i,t)).c(),k.set(i,g[m]=u),i in h&&y.set(i,Math.abs(m-h[i]))}const $=new Set,b=new Set;function w(t){O(t,1),t.m(i,l),s.set(t.key,t),l=t.first,p--}for(;f&&p;){const n=g[p-1],e=t[f-1],o=n.key,r=e.key;n===e?(l=n.first,f--,p--):k.has(r)?!s.has(o)||$.has(o)?w(n):b.has(r)?f--:y.get(o)>y.get(r)?(b.add(o),w(n)):($.add(r),f--):(u(e,s),f--)}for(;f--;){const n=t[f];k.has(n.key)||u(n,s)}for(;p;)w(g[p-1]);return g}(b,t,x,1,n,o,w,g,R,Y,null,V),L()},i(t){if(!k){for(let t=0;t<v.length;t+=1)O(b[t]);k=!0}},o(t){for(let t=0;t<b.length;t+=1)S(b[t]);k=!1},d(t){t&&a(n),t&&a(s),t&&a(p);for(let t=0;t<b.length;t+=1)b[t].d()}}}function Y(t,n){let e,o;const r=new U({props:{asin:n.prod.asin,name:n.prod.name,category:n.prod.category,rank:n.prod.rank,weight:n.prod.weight,dimensions:n.prod.dimensions}});return{key:t,first:null,c(){e=d(""),z(r.$$.fragment),this.first=e},m(t,n){u(t,e,n),P(r,t,n),o=!0},p(t,n){const e={};t.products&&(e.asin=n.prod.asin),t.products&&(e.name=n.prod.name),t.products&&(e.category=n.prod.category),t.products&&(e.rank=n.prod.rank),t.products&&(e.weight=n.prod.weight),t.products&&(e.dimensions=n.prod.dimensions),r.$set(e)},i(t){o||(O(r.$$.fragment,t),o=!0)},o(t){S(r.$$.fragment,t),o=!1},d(t){t&&a(e),T(r,t)}}}function Z(n){let e;const o=new G({});return{c(){z(o.$$.fragment)},m(t,n){P(o,t,n),e=!0},p:t,i(t){e||(O(o.$$.fragment,t),e=!0)},o(t){S(o.$$.fragment,t),e=!1},d(t){T(o,t)}}}function tt(t){let e,o,r,c,s,d,h,g,k={ctx:t,current:null,token:null,pending:Z,then:X,catch:W,value:"value",error:"error",blocks:[,,,]};return N(d=t.promise_products,k),{c(){e=l("main"),(o=l("h1")).innerHTML="<pre>Products</pre>",r=f(),(c=l("button")).textContent="reload products",s=f(),k.block.c(),m(o,"class","svelte-1y0jqd5"),m(e,"class","svelte-1y0jqd5"),g=p(c,"click",t.promiseClick)},m(t,n){u(t,e,n),i(e,o),i(e,r),i(e,c),i(e,s),k.block.m(e,k.anchor=null),k.mount=()=>e,k.anchor=null,h=!0},p(e,o){t=o,k.ctx=t,e.promise_products&&d!==(d=t.promise_products)&&N(d,k)||k.block.p(e,n(n({},t),k.resolved))},i(t){h||(O(k.block),h=!0)},o(t){for(let t=0;t<3;t+=1){S(k.blocks[t])}h=!1},d(t){t&&a(e),k.block.d(),k.token=null,k=null,g()}}}function nt(t,n,e){let o=[],r=c();async function c(){const t=await fetch("https://js-amazon-test.herokuapp.com/products/"),n=await t.json();if(t.ok)return e("products",o=n.products),n.products.length;throw new Error(n)}return{products:o,promise_products:r,promiseClick:function(){e("promise_products",r=c())}}}return new class extends H{constructor(t){super(),F(this,t,nt,tt,s,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
